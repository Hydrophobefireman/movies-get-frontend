(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{314:function(e,t,n){"use strict";var a,i=n(5),o=n.n(i),s=n(12),r=n.n(s),c=n(19),u=n.n(c),d=n(39),l=n.n(d),h=n(34),v=n.n(h),p=n(23),f=n.n(p),m=n(40),b=n.n(m),k=n(134),w=n.n(k),y=n(22),g=n(7),C=n(38),O=function(){function e(){u()(this,e)}return f()(e,[{key:"__defaultOnMessage",value:function(e){if(!["ping","pong"].includes(e.data)){var t=JSON.parse(e.data);this._socketID=t.socket_id}}},{key:"startConn",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new Promise(function(a,i){t.socket=new WebSocket(Object(C.f)(e)),t.socket.onopen=function(){t.socket.onmessage=t.__defaultOnMessage,n&&t._pingPongs(),a(t.socket)},t.socket.onerror=function(e){return i(e)}})}},{key:"close",value:function(){try{this.socket.close()}catch(e){console.warn(e)}}},{key:"send",value:function(e){return this.socket.send(JSON.stringify(e))}},{key:"sendString",value:function(e){return this.socket.send(e)}},{key:"_pingPongs",value:function(){var e=this;this.pingtimer=setTimeout(function(){e.socket.readyState===e.socket.OPEN?(e.send({type:"ping"}),e._pingPongs()):clearTimeout(e.pingtimer)},2e4)}},{key:"onmessage",set:function(e){this.socket.onmessage=function(t){var n=JSON.parse(t.data||"{}");return"ping"===n.type||"pong"===n.type?void 0:e(n)}}},{key:"readyState",get:function(){return this.socket.readyState}},{key:"isUsable",get:function(){return!this.socket||[WebSocket.OPEN,WebSocket.CONNECTING].includes(this.socket.readyState)}},{key:"isConnected",get:function(){return!!this.socket&&[WebSocket.OPEN,WebSocket.CONNECTING].includes(this.socket.readyState)}}]),e}(),S=function(){return(a||{}).isUsable?a:a=new O},N=n(61);n.d(t,"b",function(){return j}),n.d(t,"a",function(){return D});var j=function(e){document.title=e},E=function(e){function t(e){var n;return u()(this,t),(n=l()(this,v()(t).call(this,"input",{value:""},[],{className:["paper-input"]}))).useSocket=!!e,n.onResponse=function(){},n.socket={},e&&(n.socket=S(),n.beforeRender=function(){n.onResponse()},n.onAttached=function(){!n.socket.isConnected&&n.socket.isUsable&&n.socket.startConn("suggestqueries",!1)}),n.attachEventListener("input",n.handleInput.bind(w()(w()(n)))).attachEventListener("focus",n.handleFocus.bind(w()(w()(n)))).attachEventListener("blur",n.handleBlur.bind(w()(w()(n)))),n}return b()(t,e),f()(t,[{key:"update",value:function(){var e=this.getState.value;j(e?"Search for ".concat(e):window.oldTitle),this.setDomAttrs({value:e},!1).updateDOMAttrs()}},{key:"appendComponentOnResponse",value:function(e){this.socket.onmessage=this.onResponse=e.bind(this)}},{key:"handleInput",value:function(){var e=r()(o.a.mark(function e(t){var n,a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.value,this.setState({value:n}),"/search/"===Object(N.b)(window.location.href).route&&Object(N.c)("q",n),!this.socket.isConnected&&this.socket.isUsable&&this.useSocket&&this.socket.startConn("suggestqueries",!1),(a=n.trim())&&this.useSocket&&this.socket.sendString(a);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleFocus",value:function(){this.setState({isFocused:!0})}},{key:"handleBlur",value:function(){this.setState({isFocused:!1})}}]),t}(y.b),x=function(e){function t(e){return u()(this,t),l()(this,v()(t).call(this,"div",{},[new g.b(e)],{className:"_animate"}))}return b()(t,e),f()(t,[{key:"update",value:function(){this.updateChildren(),(this.getState.value||"").trim()||this.getState.isFocused?this.addClassName("moveup").removeClassName("movedown"):this.removeClassName("moveup").addClassName("movedown"),this.updateDOMAttrs()}}]),t}(y.b),D=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=new x(e),a=new E(t).bindData("value",n,"value",!1).bindData("isFocused",n,"isFocused",!1);return{component:new y.b("div",{},[n,a],{className:["search-component"]}),inputComponent:a,animatedInputComponent:n}}},315:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var a=n(7),i=n(61),o=n(22),s=n(38),r=function(e){var t=[],n=!0,r=!1,c=void 0;try{for(var u,l=function(){var e=u.value,n=e.id,r=e.movie,c="/watch?".concat(Object(i.d)({id:n,movie:Object(s.j)(r)})),l=new o.b("div",{id:n,movieName:r},[],{className:"query-response"}),h=new o.b("a",{},[new a.b(r,n)],{href:"#".concat(c),className:"movie-link"}).attachEventListener("click",function(){d(),Object(i.a)("/watch?".concat(Object(i.d)({id:l.getState.id,movie:Object(s.j)(l.getState.movieName)})))});l.addChild(h),t.push(l)},h=e[Symbol.iterator]();!(n=(u=h.next()).done);n=!0)l()}catch(e){r=!0,c=e}finally{try{n||null==h.return||h.return()}finally{if(r)throw c}}return t},c=function(e,t){t.forEach(function(t,n){var o=e[n],s=t.children[0],r=t.getState.id,c=a.b.find(r,s.$element)[0],u=o.id,d=o.movie;if(r!==u){var l="/watch?".concat(Object(i.d)({id:u,movie:d}));s.setDomAttrs({href:"#".concat(l)},!1),t.setState({id:u,movieName:d},!1),c.data=d,c.tag=u}})},u=new o.b("div",{},[],{class:["response-parent"]}),d=function(e){if(!e)return u.removeClassName("has-data"),u.destroyChildComponents(!1,!0),u;u.addClassName("has-data");var t,n,i=("string"==typeof(t=e)&&(a.e&&console.warn("return response as an object!"),n=JSON.parse(t)),(n=t)["no-res"]?[]:n.data||[]),o=i.length;o||u.removeClassName("has-data");var s=u.children.length;if(o===s)c(i,u.children);else if(o>s){var d=i.splice(s,o);c(i,u.children);var l=r(d),h=!0,v=!1,p=void 0;try{for(var f,m=l[Symbol.iterator]();!(h=(f=m.next()).done);h=!0){var b=f.value;u.addChild(b)}}catch(e){v=!0,p=e}finally{try{h||null==m.return||m.return()}finally{if(v)throw p}}}else{var k=u.children.splice(o,s);c(i,u.children),k.forEach(function(e){return e.destroyComponent()})}u.update()}},316:function(e,t,n){"use strict";n.r(t);var a=n(22),i=n(7),o=n(314),s=n(61),r=n(315),c=n(5),u=n.n(c),d=n(12),l=n.n(d),h=n(19),v=n.n(h),p=n(39),f=n.n(p),m=n(34),b=n.n(m),k=n(23),w=n.n(k),y=n(40),g=n.n(y),C=n(101),O=n(38),S=function(e){function t(){var e;if(v()(this,t),(e=f()(this,b()(t).call(this,"div",{data:[]},[],{class:"rec-box"}))).beforeRender=console.log,e.onAttached=function(){e.setState({data:[]}),C.a.get("/i/rec/",!0).then(function(e){return e.json()}).then(function(t){return e.setState({data:t.recommendations},!0)}).catch(e.destroyComponent)},!e.getState.data.length)for(var n=0;n<5;n++)e.children.push(new a.b("div",{},[new a.b("div",{},[],{className:"rec-image"}),new a.b("div",{},[],{className:"ghostText"})],{className:"rec-wrapper"}));return e}return g()(t,e),w()(t,[{key:"futureAddOn",value:function(e){return this._parent=e,this}},{key:"update",value:function(){var e=l()(u.a.mark(function e(){var t,n,o,r,c,d,l,h,v,p;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.getState.data,this.destroyChildComponents(!1,!0),n=!0,o=!1,r=void 0,e.prev=5,c=t[Symbol.iterator]();case 7:if(n=(d=c.next()).done){e.next=20;break}return l=d.value,e.next=11,Object(O.e)(l.thumb);case 11:h=e.sent,v=new a.b("div",{},[],{style:{"background-image":"url(".concat(h,")")},className:"rec-image"}),l.movie=Object(O.c)(l.movie),(p=new a.b("a",{url:l.id,name:l.movie},[v,new a.b("span",{},[new i.b(l.movie)],{className:"rec-title"})],{className:"rec-wrapper",href:"#/watch?".concat(Object(s.d)({id:l.id,movie:Object(O.j)(l.movie)}))})).attachEventListener("click",function(e){e.ctrlKey||Object(s.a)("/watch?".concat(Object(s.d)({id:this.getState.url,movie:Object(O.j)(this.getState.name)})))}.bind(p)),this.addChild(p);case 17:n=!0,e.next=7;break;case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(5),o=!0,r=e.t0;case 26:e.prev=26,e.prev=27,n||null==c.return||c.return();case 29:if(e.prev=29,!o){e.next=32;break}throw r;case 32:return e.finish(29);case 33:return e.finish(26);case 34:this.updateChildren(this.$element);case 35:case"end":return e.stop()}},e,this,[[5,22,26,34],[27,,29,33]])}));return function(){return e.apply(this,arguments)}}()}]),t}(a.b);n.d(t,"animatedInputComponent",function(){return E}),n.d(t,"handleInput",function(){return x}),n.d(t,"handleKeyDown",function(){return D}),n.d(t,"searchButtonComponent",function(){return _}),n.d(t,"asYouTypeComponent",function(){return A}),n.d(t,"handleButtonClick",function(){return L});var N=new a.b("div",{},[new i.b("NEW! Add a new movie to our databases by yourself"),new a.b("a",{},[new i.b("Here!")],{className:["banner-button","database-linker"],href:"#/media/add/"}).attachEventListener("click",function(e){e.preventDefault(),e.ctrlKey||Object(s.a)("/media/add/")})]),j=new a.b("div").addChild(Object(r.a)()),E=Object(o.a)("Search For movies");function x(e){var t=e.target.value;E.inputComponent.handleInput.call(this,{target:{value:t}}),t.trim()||Object(r.a)(),E.inputComponent.appendComponentOnResponse(r.a)}function D(e){if(85===e.keyCode&&e.ctrlKey)e.preventDefault(),E.inputComponent.setState({value:""}),Object(r.a)();else if(13===e.keyCode){var t=this.getState.value||"";if(t.trim())return Object(r.a)(),Object(s.a)("/search?".concat(Object(s.d)({q:t})))}}var _=new a.b("button",{},[new i.b("Search")],{class:"search-button"}).bindData("query",E.inputComponent,"value",!1),A=new a.b("div",{},[E.component,j,_]),I=new a.b("div",{},[N,A,new a.b("div",{},[new i.b("Check some of these movies out")],{style:"display:block;margin-top: 50px;"})]);function L(){var e=this.getState.query;e&&e.trim()&&(Object(r.a)(),Object(s.a)("/search?".concat(Object(s.d)({q:e}))))}I.addChild((new S).futureAddOn(I)),E.inputComponent.attachEventListener("input",x.bind(E.inputComponent),!0),I.onAttached=function(){Object(o.b)(window.oldTitle),E.inputComponent.attachEventListener("keydown",D.bind(E.inputComponent),!0),_.attachEventListener("click",L.bind(_),!0)};t.default=I}}]);