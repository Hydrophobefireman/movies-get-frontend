(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{29:function(t,e,s){"use strict";s.d(e,"a",(function(){return r}));var n=s(7),o=s(1);function i(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}class r extends n.a{constructor(...t){super(...t),i(this,"state",{isFocused:!1,value:""}),i(this,"onFocus",()=>!this.state.value&&this.setState({isFocused:!0,moveDown:!1})),i(this,"onBlur",()=>!this.state.value&&this.setState({isFocused:!1,moveDown:!0})),i(this,"onInput",t=>this.setState({value:t.target.value})),i(this,"onSubmit",()=>this.props.onSubmit(this.state.value))}render({id:t,buttonText:e="Search",labelText:s="Search For Movies",onInput:n,wssResponse:i},{isFocused:r,moveDown:c}){const u=["_animate",r?"moveup":"",c?"movedown":""];return Object(o.b)("div",{class:"search-component"},Object(o.b)("form",{action:"javascript:",onSubmit:this.onSubmit},Object(o.b)("label",{class:u,for:t},s),Object(o.b)(a,{onFocus:this.onFocus,onBlur:this.onBlur,id:t,onInput:t=>{this.onInput(t),null!=n&&n(t)}}),i,Object(o.b)("button",{class:"search-button"},e)))}}function a({onFocus:t,onBlur:e,onInput:s,id:n}){return Object(o.b)("input",{onFocus:t,onBlur:e,onInput:s,id:n,class:"paper-input"})}},31:function(t,e,s){"use strict";var n=s(2);let o=Object(n.e)();const i=Object(n.b)("Map",o),r=(Object(n.b)("Set",o),Object(n.b)("WeakMap",o)&&Object(n.b)("WeakSet",o),"__@@map"),a=t=>t!=t,c=(t,e)=>t===e||a(t)&&a(e),u=t=>0===t?0:t;let l,h,b;if("undefined"!=typeof Symbol){function p(t,e){const s=t[r];let n=0;const o=s.length,i=e?0:1;return{[Symbol.iterator]:function(){return this},next:function(){return n<o?{value:s[n++][i],done:!1}:{value:void 0,done:!0}}}}l=function(){return this[r][Symbol.iterator]()},h=function(){return p(this,!1)},b=function(){return p(this,!0)}}else l=b=h=function(){console.warn("no symbol support")};var d={keys:b,values:h,entries:l},m=s(10);function f(t,e){const s=t[r],n=s.length;for(let t=0;t<n;t++){const n=s[t];if(c(n[0],e))return n}return null}function g(t,e){if(s=t,!(null!=(n=e)&&"undefined"!=typeof Symbol&&n[Symbol.hasInstance]?n[Symbol.hasInstance](s):s instanceof n))throw new TypeError("Cannot call a class as a function");var s,n}const v=function t(e,s){return g(this,t),!s&&i?new Map(e):(this[r]=[],function(t,e){if(null==e)return;if(!Object(n.d)(e))throw new Error("value:"+String(e)+" is not iterable");const s=e.length;for(let n=0;n<s;n++){const s=e[n];if(!s||2!==s.length)throw new Error("invalid arg");t.set(s[0],s[1])}}(this,e),this)};var S;(S=v).prototype.set=function(t,e){const s=f(this,t);return s?s[1]=e:this[r].push([u(t),e]),this},S.prototype.has=function(t){return!!f(this,t)},S.prototype.delete=function(t){let e=!1;return this[r]=this[r].filter(s=>{const n=!c(s[0],t);return n||(e=!0),n}),e},S.prototype.get=function(t){const e=f(this,t);return e?e[1]:void 0},S.prototype.forEach=function(t,e){const s=this[r],n=s.length;for(let o=0;o<n;o++){const n=s[o],i=n[1],r=n[0],a=this;e?t.call(e,i,r,a):t(i,r,a)}},S.prototype.clear=function(){this[r].length=0},Object.defineProperty(S.prototype,"size",{enumerable:!1,configurable:!0,get:function(){return this[r].length}}),"undefined"!=typeof Symbol&&(S.prototype[Symbol.iterator]=d.entries,S.prototype[Symbol.toStringTag]="Map"),Object(m.a)(S.prototype,d),v[Symbol.species]=v;e.a=v},33:function(t,e,s){"use strict";s.d(e,"a",(function(){return m}));var n=s(7),o=s(1),i=s(29),r=s(8),a=s(26);class c{__defaultOnMessage(t){if(["ping","pong"].includes(t.data))return;const e=JSON.parse(t.data);this._socketID=e.socket_id}startConn(t){return this.socket&&[WebSocket.OPEN,WebSocket.CONNECTING].includes(this.socket.readyState)?this.socket:new Promise((e,s)=>{this.socket=new WebSocket(Object(r.h)(t)),this.socket.onopen=()=>{this.socket.onmessage=this.__defaultOnMessage,e(this.socket)},this.socket.onerror=t=>s(t)})}close(){try{this.socket.close()}catch(t){console.warn(t)}}send(t){return this.socket.send(JSON.stringify(t))}sendString(t){return this.socket.send(t)}set onmessage(t){t!==this._onmessage&&(this._onmessage=t,this.socket.onmessage=t=>{const e=JSON.parse(t.data||"{}");return"ping"===e.type||"pong"===e.type?void 0:this._onmessage(e)})}get readyState(){return this.socket.readyState}get isUsable(){return!this.socket||[WebSocket.OPEN,WebSocket.CONNECTING].includes(this.socket.readyState)}get isConnected(){return!!this.socket&&[WebSocket.OPEN,WebSocket.CONNECTING].includes(this.socket.readyState)}}let u;const l=()=>((u||{}).isUsable||(u=new c),u);function h(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}let b;class p extends n.a{constructor(...t){super(...t),h(this,"state",{resp:[],prevVal:""}),h(this,"onMessage",t=>{t.data?this.setState({resp:t.data.map(t=>({movie:t.movie,href:Object(r.e)(t.id,t.movie)}))}):this.setState({resp:[]})}),h(this,"componentWillUpdate",this.fetchResponses),h(this,"componentWillMount",this.componentWillUpdate)}async fetchResponses(){const t=this.props.val;t!=this.state.prevVal&&t?(console.log("fetching"),this.setState({prevVal:t}),b=l(),await b.startConn("suggestqueries"),b.onmessage=this.onMessage,b.sendString(t)):this.state.resp.length&&!t&&this.setState({resp:[],prevVal:""})}render(){const t=["response-parent"];return this.state.resp.length&&t.push("has-data"),Object(o.b)("div",{class:t},this.state.resp.map(t=>Object(o.b)(a.a,{class:["movie-link","query-response"],href:t.href},Object(r.c)(t.movie))))}}function d(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}class m extends n.a{constructor(...t){super(...t),d(this,"state",{value:""}),d(this,"onInput",t=>{const e=(t.target.value||"").trim();document.title=e?`Search for ${e}`:r.d,this.setState({value:e})}),d(this,"loadSearchResults",()=>{const t=(this.state.value||"").trim();t&&Object(r.g)(t),this.setState({value:""})})}componentWillMount(){l().startConn("suggestqueries")}render(){return Object(o.b)(o.a,null,Object(o.b)(i.a,{id:"landing-search-component",onSubmit:this.loadSearchResults,wssResponse:Object(o.b)(p,{val:this.state.value}),onInput:this.onInput}))}}},39:function(t,e,s){"use strict";s.r(e),s.d(e,"default",(function(){return k}));var n=s(7),o=s(26),i=s(1),r=s(33),a=s(11),c=s(9),u=s(31);const l="data:text/html;base64,PGh0bWw+PGJvZHkgc3R5bGU9Im1hcmdpbjphdXRvO3RleHQtYWxpZ246Y2VudGVyO2ZvbnQtZmFtaWx5OnNhbnMtc2VyaWY7Zm9udC13ZWlnaHQ6Ym9sZCI+TG9hZGluZy4uLjwvYm9keT48L2h0bWw+",h=new u.a;console.log("video player cache:",h);const b=t=>{if(!t||"none"===t.toLowerCase())return null;let e;try{e=new URL(t,`${location.protocol}//${location.hostname}`),e.protocol="https:",e=e.toString()}catch(s){e=t,t.startsWith("//")&&(e=`https:${e}`)}return e},p=async t=>{const e=await c.a.post("/api/movie/",!0,{id:t},{"content-type":"application/json"}),s=await e.json();if(s.error||!s.movie_name)throw new Error;return{movie:s.movie_name,urls:[s.url,s.alt1,s.alt2].map(b)}},d=Object(i.b)("div",null,"No movie exists with the given ID");function m(t){return new URL(t).hostname}var f=s(8);function g(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}class v extends n.a{constructor(...t){super(...t),g(this,"state",{src:l}),g(this,"componentDidUpdate",this.componentDidMount),g(this,"setSrc",t=>this.setState({src:t}))}componentDidMount(){this.state.src===l&&this.props.URLs.length&&this.setState({src:this.props.URLs[0]})}render({URLs:t,movieName:e,id:s}){return Object(i.b)(i.a,null,Object(i.b)("h2",{style:{fontWeight:"bold"}},Object(f.c)(e)),Object(i.b)(S,{id:s}),t.map(t=>Object(i.b)(O,{url:t,onClick:this.setSrc})),Object(i.b)("iframe",{class:"frame-src",src:(n=this.state.src,new URL(n).hostname.toLowerCase().includes("tunestream")?"data:text/html;base64,PGh0bWw+PGhlYWQ+PC9oZWFkPjxib2R5PjxkaXYgc3R5bGU9ImNvbG9yOiB3aGl0ZTttYXJnaW46YXV0bztmb250LWZhbWlseTogc2Fucy1zZXJpZjt0ZXh0LWFsaWduOmNlbnRlcjtmb250LXdlaWdodDogYm9sZDsiPlVzZSBUaGUgQ3VzdG9tIERvd25sb2FkZXIgdG8gV2F0Y2g8L2Rpdj48L2JvZHk+PC9odG1sPg==":n)}),t.map(t=>Object(i.b)(j,{href:t})));var n}}class S extends n.a{constructor(...t){super(...t),g(this,"state",{hasSubtitles:null}),g(this,"css",{color:"var(--text-component)",display:"block",margin:"auto",marginBottom:"10px",width:"50%",textDecoration:"none",borderRadius:"10px"}),g(this,"componentWillUpdate",this.componentWillMount)}componentWillMount(){"boolean"!=typeof this.state.hasSubtitles&&(this.setState({hasSubtitles:!1}),c.a.get("/api/movie/has-subtitles?"+Object(f.j)({s:this.props.id})).then(t=>t.json()).then(t=>this.setState({hasSubtitles:t.data})))}render({id:t},{hasSubtitles:e}){return e?Object(i.b)("a",{class:"search-button",target:"_blank",style:this.css,href:`https://movies-get.herokuapp.com/api/get-subtitles/?${Object(f.j)({s:t})}`},"Download Subtitles"):Object(i.b)("a",{style:{display:"none"}})}}function O({url:t,onClick:e}){return t?Object(i.b)("button",{onClick:()=>e(t),class:"url-selector-button",style:{cursor:"pointer"}},m(t)):null}function j({href:t}){if(!t)return null;const e=`/out?${Object(f.j)({u:t})}`;return Object(i.b)(o.a,{href:e,class:["download-url-component","search-button"]},"Download from: ",m(t))}function y(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}class w extends n.a{constructor(...t){super(...t),y(this,"state",{badId:!1,URLArr:[],fetchingDetails:!1,movieName:""}),y(this,"componentDidUpdate",this.componentDidMount)}render({id:t},{URLArr:e,badId:s,fetchingDetails:n,movieName:o}){return s||!e||!e.length&&!n?d:n?Object(i.b)("div",{"data-fetch":JSON.stringify(this.props)},"Loading Movie Data",Object(i.b)("div",null,Object(i.b)(a.a))):Object(i.b)(v,{URLs:e,movieName:o,id:t})}componentDidMount(t){const e=this.props.id;if(e||this.setState({badId:!0}),!(this.state.fetchingDetails||t&&t.id===this.props.id))return this.setState({URLArr:[],badId:!1,fetchingDetails:!0}),(async t=>{const e=h.get(t);if(e)return console.log("refreshing cache in background"),p(t).then(e=>h.set(t,e)),e;{const e=await p(t);return h.set(t,e),e}})(e).then(t=>this.setState({URLArr:t.urls,badId:!1,fetchingDetails:!1,movieName:t.movie})).catch(t=>console.log(t)||this.setState({badId:!0,URLArr:[],fetchingDetails:!1}))}}class k extends n.a{constructor(...t){var e,s,n;super(...t),n={badId:!1},(s="state")in(e=this)?Object.defineProperty(e,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[s]=n}get movieId(){return new URLSearchParams(o.d.getQs).get("id")}getChildren({},{badId:t}){return t?d:Object(i.b)(w,{id:this.movieId})}render(t,e){return Object(i.b)(i.a,null,Object(i.b)(r.a),Object(i.b)("section",{data:"player-component"},this.getChildren(t,e)))}}}}]);