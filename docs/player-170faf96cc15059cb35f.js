(window.webpackJsonp=window.webpackJsonp||[]).push([[7,4],{314:function(e,t,n){"use strict";var a,r=n(5),i=n.n(r),o=n(12),s=n.n(o),c=n(19),u=n.n(c),d=n(39),l=n.n(d),h=n(34),p=n.n(h),v=n(23),f=n.n(v),b=n(40),m=n.n(b),y=n(134),w=n.n(y),k=n(22),C=n(7),g=n(38),O=function(){function e(){u()(this,e)}return f()(e,[{key:"__defaultOnMessage",value:function(e){if(!["ping","pong"].includes(e.data)){var t=JSON.parse(e.data);this._socketID=t.socket_id}}},{key:"startConn",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new Promise(function(a,r){t.socket=new WebSocket(Object(g.f)(e)),t.socket.onopen=function(){t.socket.onmessage=t.__defaultOnMessage,n&&t._pingPongs(),a(t.socket)},t.socket.onerror=function(e){return r(e)}})}},{key:"close",value:function(){try{this.socket.close()}catch(e){console.warn(e)}}},{key:"send",value:function(e){return this.socket.send(JSON.stringify(e))}},{key:"sendString",value:function(e){return this.socket.send(e)}},{key:"_pingPongs",value:function(){var e=this;this.pingtimer=setTimeout(function(){e.socket.readyState===e.socket.OPEN?(e.send({type:"ping"}),e._pingPongs()):clearTimeout(e.pingtimer)},2e4)}},{key:"onmessage",set:function(e){this.socket.onmessage=function(t){var n=JSON.parse(t.data||"{}");return"ping"===n.type||"pong"===n.type?void 0:e(n)}}},{key:"readyState",get:function(){return this.socket.readyState}},{key:"isUsable",get:function(){return!this.socket||[WebSocket.OPEN,WebSocket.CONNECTING].includes(this.socket.readyState)}},{key:"isConnected",get:function(){return!!this.socket&&[WebSocket.OPEN,WebSocket.CONNECTING].includes(this.socket.readyState)}}]),e}(),S=function(){return(a||{}).isUsable?a:a=new O},j=n(61);n.d(t,"b",function(){return N}),n.d(t,"a",function(){return R});var N=function(e){document.title=e},L=function(e){function t(e){var n;return u()(this,t),(n=l()(this,p()(t).call(this,"input",{value:""},[],{className:["paper-input"]}))).useSocket=!!e,n.onResponse=function(){},n.socket={},e&&(n.socket=S(),n.beforeRender=function(){n.onResponse()},n.onAttached=function(){!n.socket.isConnected&&n.socket.isUsable&&n.socket.startConn("suggestqueries",!1)}),n.attachEventListener("input",n.handleInput.bind(w()(w()(n)))).attachEventListener("focus",n.handleFocus.bind(w()(w()(n)))).attachEventListener("blur",n.handleBlur.bind(w()(w()(n)))),n}return m()(t,e),f()(t,[{key:"update",value:function(){var e=this.getState.value;N(e?"Search for ".concat(e):window.oldTitle),this.setDomAttrs({value:e},!1).updateDOMAttrs()}},{key:"appendComponentOnResponse",value:function(e){this.socket.onmessage=this.onResponse=e.bind(this)}},{key:"handleInput",value:function(){var e=s()(i.a.mark(function e(t){var n,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.value,this.setState({value:n}),"/search/"===Object(j.b)(window.location.href).route&&Object(j.c)("q",n),!this.socket.isConnected&&this.socket.isUsable&&this.useSocket&&this.socket.startConn("suggestqueries",!1),(a=n.trim())&&this.useSocket&&this.socket.sendString(a);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleFocus",value:function(){this.setState({isFocused:!0})}},{key:"handleBlur",value:function(){this.setState({isFocused:!1})}}]),t}(k.b),x=function(e){function t(e){return u()(this,t),l()(this,p()(t).call(this,"div",{},[new C.b(e)],{className:"_animate"}))}return m()(t,e),f()(t,[{key:"update",value:function(){this.updateChildren(),(this.getState.value||"").trim()||this.getState.isFocused?this.addClassName("moveup").removeClassName("movedown"):this.removeClassName("moveup").addClassName("movedown"),this.updateDOMAttrs()}}]),t}(k.b),R=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=new x(e),a=new L(t).bindData("value",n,"value",!1).bindData("isFocused",n,"isFocused",!1);return{component:new k.b("div",{},[n,a],{className:["search-component"]}),inputComponent:a,animatedInputComponent:n}}},315:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var a=n(7),r=n(61),i=n(22),o=n(38),s=function(e){var t=[],n=!0,s=!1,c=void 0;try{for(var u,l=function(){var e=u.value,n=e.id,s=e.movie,c="/watch?".concat(Object(r.d)({id:n,movie:Object(o.j)(s)})),l=new i.b("div",{id:n,movieName:s},[],{className:"query-response"}),h=new i.b("a",{},[new a.b(s,n)],{href:"#".concat(c),className:"movie-link"}).attachEventListener("click",function(){d(),Object(r.a)("/watch?".concat(Object(r.d)({id:l.getState.id,movie:Object(o.j)(l.getState.movieName)})))});l.addChild(h),t.push(l)},h=e[Symbol.iterator]();!(n=(u=h.next()).done);n=!0)l()}catch(e){s=!0,c=e}finally{try{n||null==h.return||h.return()}finally{if(s)throw c}}return t},c=function(e,t){t.forEach(function(t,n){var i=e[n],o=t.children[0],s=t.getState.id,c=a.b.find(s,o.$element)[0],u=i.id,d=i.movie;if(s!==u){var l="/watch?".concat(Object(r.d)({id:u,movie:d}));o.setDomAttrs({href:"#".concat(l)},!1),t.setState({id:u,movieName:d},!1),c.data=d,c.tag=u}})},u=new i.b("div",{},[],{class:["response-parent"]}),d=function(e){if(!e)return u.removeClassName("has-data"),u.destroyChildComponents(!1,!0),u;u.addClassName("has-data");var t,n,r=("string"==typeof(t=e)&&(a.e&&console.warn("return response as an object!"),n=JSON.parse(t)),(n=t)["no-res"]?[]:n.data||[]),i=r.length;i||u.removeClassName("has-data");var o=u.children.length;if(i===o)c(r,u.children);else if(i>o){var d=r.splice(o,i);c(r,u.children);var l=s(d),h=!0,p=!1,v=void 0;try{for(var f,b=l[Symbol.iterator]();!(h=(f=b.next()).done);h=!0){var m=f.value;u.addChild(m)}}catch(e){p=!0,v=e}finally{try{h||null==b.return||b.return()}finally{if(p)throw v}}}else{var y=u.children.splice(i,o);c(r,u.children),y.forEach(function(e){return e.destroyComponent()})}u.update()}},316:function(e,t,n){"use strict";n.r(t);var a=n(22),r=n(7),i=n(314),o=n(61),s=n(315),c=n(5),u=n.n(c),d=n(12),l=n.n(d),h=n(19),p=n.n(h),v=n(39),f=n.n(v),b=n(34),m=n.n(b),y=n(23),w=n.n(y),k=n(40),C=n.n(k),g=n(101),O=n(38),S=function(e){function t(){var e;if(p()(this,t),(e=f()(this,m()(t).call(this,"div",{data:[]},[],{class:"rec-box"}))).beforeRender=console.log,e.onAttached=function(){e.setState({data:[]}),g.a.get("/i/rec/",!0).then(function(e){return e.json()}).then(function(t){return e.setState({data:t.recommendations},!0)}).catch(e.destroyComponent)},!e.getState.data.length)for(var n=0;n<5;n++)e.children.push(new a.b("div",{},[new a.b("div",{},[],{className:"rec-image"}),new a.b("div",{},[],{className:"ghostText"})],{className:"rec-wrapper"}));return e}return C()(t,e),w()(t,[{key:"futureAddOn",value:function(e){return this._parent=e,this}},{key:"update",value:function(){var e=l()(u.a.mark(function e(){var t,n,i,s,c,d,l,h,p,v;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.getState.data,this.destroyChildComponents(!1,!0),n=!0,i=!1,s=void 0,e.prev=5,c=t[Symbol.iterator]();case 7:if(n=(d=c.next()).done){e.next=20;break}return l=d.value,e.next=11,Object(O.e)(l.thumb);case 11:h=e.sent,p=new a.b("div",{},[],{style:{"background-image":"url(".concat(h,")")},className:"rec-image"}),l.movie=Object(O.c)(l.movie),(v=new a.b("a",{url:l.id,name:l.movie},[p,new a.b("span",{},[new r.b(l.movie)],{className:"rec-title"})],{className:"rec-wrapper",href:"#/watch?".concat(Object(o.d)({id:l.id,movie:Object(O.j)(l.movie)}))})).attachEventListener("click",function(e){e.ctrlKey||Object(o.a)("/watch?".concat(Object(o.d)({id:this.getState.url,movie:Object(O.j)(this.getState.name)})))}.bind(v)),this.addChild(v);case 17:n=!0,e.next=7;break;case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(5),i=!0,s=e.t0;case 26:e.prev=26,e.prev=27,n||null==c.return||c.return();case 29:if(e.prev=29,!i){e.next=32;break}throw s;case 32:return e.finish(29);case 33:return e.finish(26);case 34:this.updateChildren(this.$element);case 35:case"end":return e.stop()}},e,this,[[5,22,26,34],[27,,29,33]])}));return function(){return e.apply(this,arguments)}}()}]),t}(a.b);n.d(t,"animatedInputComponent",function(){return L}),n.d(t,"handleInput",function(){return x}),n.d(t,"handleKeyDown",function(){return R}),n.d(t,"searchButtonComponent",function(){return E}),n.d(t,"asYouTypeComponent",function(){return A}),n.d(t,"handleButtonClick",function(){return U});var j=new a.b("div",{},[new r.b("NEW! Add a new movie to our databases by yourself"),new a.b("a",{},[new r.b("Here!")],{className:["banner-button","database-linker"],href:"#/media/add/"}).attachEventListener("click",function(e){e.preventDefault(),e.ctrlKey||Object(o.a)("/media/add/")})]),N=new a.b("div").addChild(Object(s.a)()),L=Object(i.a)("Search For movies");function x(e){var t=e.target.value;L.inputComponent.handleInput.call(this,{target:{value:t}}),t.trim()||Object(s.a)(),L.inputComponent.appendComponentOnResponse(s.a)}function R(e){if(85===e.keyCode&&e.ctrlKey)e.preventDefault(),L.inputComponent.setState({value:""}),Object(s.a)();else if(13===e.keyCode){var t=this.getState.value||"";if(t.trim())return Object(s.a)(),Object(o.a)("/search?".concat(Object(o.d)({q:t})))}}var E=new a.b("button",{},[new r.b("Search")],{class:"search-button"}).bindData("query",L.inputComponent,"value",!1),A=new a.b("div",{},[L.component,N,E]),D=new a.b("div",{},[j,A,new a.b("div",{},[new r.b("Check some of these movies out")],{style:"display:block;margin-top: 50px;"})]);function U(){var e=this.getState.query;e&&e.trim()&&(Object(s.a)(),Object(o.a)("/search?".concat(Object(o.d)({q:e}))))}D.addChild((new S).futureAddOn(D)),L.inputComponent.attachEventListener("input",x.bind(L.inputComponent),!0),D.onAttached=function(){Object(i.b)(window.oldTitle),L.inputComponent.attachEventListener("keydown",R.bind(L.inputComponent),!0),E.attachEventListener("click",U.bind(E),!0)};t.default=D},317:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n(22),r=n(7),i=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},i=new a.b("div",{},[],{className:"err-component-full-cover"}),o=new a.b("div",{},[new a.b("div",{},[new r.b(e)],{style:"overflow:hidden;text-overflow:ellipses"})],{className:"err-component-area"}).addChild(new a.b("button",{},[new r.b("Okay")],{className:"search-button"}).attachEventListener("click",function(){i.destroyComponent(!1,!0),t.removeChild(o),n()}));i.addChild(o),i.render(t.$element)}},324:function(e,t,n){"use strict";n.r(t);var a=n(5),r=n.n(a),i=n(12),o=n.n(i),s=n(22),c=n(7),u=n(316),d=n(61),l=n(101),h=function(){var e=o()(r.a.mark(function e(t){var n,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.b)();case 2:return n=e.sent,e.next=5,l.a.post("/api/movie/",!0,{token:n,id:t},{"content-type":"application/json"});case 5:return a=e.sent,e.next=8,a.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),p=n(317),v=n(19),f=n.n(v),b=n(39),m=n.n(b),y=n(34),w=n.n(y),k=n(23),C=n.n(k),g=n(40),O=n.n(g),S=n(38),j="data:text/html;base64,PGRpdiBzdHlsZT0iZm9udC1mYW1pbHk6c2Fucy1zZXJpZjttYXJnaW46YXV0bzt0ZXh0LWFsaWduOmNlbnRlcjtmb250LXdlaWdodDpib2xkIj5Mb2FkaW5nIE1vdmllIERhdGE8L2Rpdj4=",N=function(e){return new URL(e).hostname},L=function(e){function t(e,n,a,r,i){return f()(this,t),m()(this,w()(t).call(this,e,n,a,r,i))}return O()(t,e),C()(t,[{key:"onAttached",value:function(){this.children[1].$element.src=j}},{key:"update",value:function(){var e=o()(r.a.mark(function e(){var t,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.children[1],!(n=this.getState).selectedURL||t.$element.src===n.selectedURL){e.next=5;break}return t.$element.src=j,e.abrupt("return",setTimeout(function(){return n.selectedURL?t.setDomAttrs({src:n.selectedURL},!0):void 0},700));case 5:this.updateChildren(this.$element),this.updateDOMAttrs();case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),t}(s.b),x=function(e){function t(){var e;f()(this,t);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return m()(this,(e=w()(t)).call.apply(e,[this].concat(a)))}return O()(t,e),C()(t,[{key:"update",value:function(){var e=this.getState,t=this,n=e.URLArray;function a(){var e=this.getState,n=e.url;console.log(e),t.setState({selectedURL:n})}if(n){this.destroyChildComponents(!1,!0);var r=!0,i=!1,o=void 0;try{for(var u,d=n[Symbol.iterator]();!(r=(u=d.next()).done);r=!0){var l=u.value,h=new s.b("button",{url:l},[new c.b(N(l))],{className:"url-selector-button"});h.attachEventListener("click",a.bind(h)),this.addChild(h)}}catch(e){i=!0,o=e}finally{try{r||null==d.return||d.return()}finally{if(i)throw o}}}this.updateChildren(this.$element),this.updateDOMAttrs()}}]),t}(s.b),R=function(e){function t(){var e,n;f()(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=m()(this,(e=w()(t)).call.apply(e,[this].concat(r)))).onDestroy=function(){n.clearState(),((n.children[1]||{}).$element||{}).src=j},n}return O()(t,e),C()(t,[{key:"update",value:function(){var e=this.getState.URLArray;if(this.destroyChildComponents(!1,!0),e){var t=new s.b("div"),n=!0,a=!1,r=void 0;try{for(var i,o=function(){var e=i.value,n=new s.b("a",{url:e},[new c.b("Download ".concat(N(e)))],{className:"download-url-component",href:"#/out?".concat(Object(d.d)({url:e}))}).attachEventListener("click",function(t){Object(S.g)(t),Object(d.a)("/out?".concat(Object(d.d)({url:e})))});t.addChild(n,!1)},u=e[Symbol.iterator]();!(n=(i=u.next()).done);n=!0)o()}catch(e){a=!0,r=e}finally{try{n||null==u.return||u.return()}finally{if(a)throw r}}this.addChild(t)}this.updateChildren(this.$element)}}]),t}(s.b),E=new L("div",{currentEp:null},[new c.b("","episode-id"),new s.b("iframe",{},[],{src:j,className:"frame-src"})],{}),A=new x("div"),D=new R("div",{},[]),U=function(e){if(!e||"none"===e.toLowerCase())return null;var t;try{(t=new URL(e,"".concat(location.protocol,"//").concat(location.hostname))).protocol="https:",t=t.toString()}catch(n){t=e,e.startsWith("//")&&(t="https:".concat(t))}return t},I=new c.b(""),W=new s.b("h2",{},[I],{style:"font-weight:bold"}),_=new s.b("div",{},[]),F=new s.b("div",{},[u.asYouTypeComponent,W,_,A,E,D]);function T(){return(T=o()(r.a.mark(function e(){var t,n,a,i,o,v,f,b,m,y,w,k;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(d.b)(location.href).qs,n=t.get("id"),_.destroyChildComponents(!1,!0),I.textContent="Loading",u.animatedInputComponent.inputComponent.attachEventListener("keydown",u.handleKeyDown.bind(u.animatedInputComponent.inputComponent),!0),e.next=7,h(n);case 7:if(!(a=e.sent).error){e.next=10;break}return e.abrupt("return",Object(p.a)("No Movie exists with the given ID",F,function(){return F.destroyComponent(!0)}));case 10:return i=a.url,o=a.alt1,v=a.alt2,f=U(i),b=U(o),m=U(v),y=[f,b,m].filter(function(e){return e}),I.textContent="Watch: ".concat(a.movie_name),E.setState({movieID:n,URLArray:y,selectedURL:f||b||m}),w=Object(d.d)({s:n}),e.next=18,l.a.get("/api/movie/has-subtitles?".concat(w),!0);case 18:return k=e.sent,e.next=21,k.json();case 21:e.sent.data&&(_.destroyChildComponents(!1,!0),_.children=[new s.b("a",{},[new c.b("Download Subtitles")],{href:"".concat(S.a,"/api/get-subtitles/?").concat(w),className:"search-button",style:"color:black;display:block;margin-bottom:10px"})],_.update());case 23:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}E.bindData("URLArray",A,"URLArray",!1),E.bindData("selectedURL",A,"selectedURL",!0),E.bindData("URLArray",D,"URLArray",!1),F.onAttached=function(){return T.apply(this,arguments)};t.default=F}}]);