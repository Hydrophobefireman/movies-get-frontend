(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{232:function(t,e,s){"use strict";s.d(e,"a",(function(){return c}));var n=s(8),o=s.n(n),r=s(47),i=s(3);class c extends r.a{constructor(){super(...arguments),o()(this,"state",{isFocused:!1,value:""}),o()(this,"onFocus",()=>!this.state.value&&this.setState({isFocused:!0,moveDown:!1})),o()(this,"onBlur",()=>!this.state.value&&this.setState({isFocused:!1,moveDown:!0})),o()(this,"onInput",t=>this.setState({value:t.target.value})),o()(this,"onSubmit",()=>this.props.onSubmit(this.state.value))}render(t,e){let{id:s,buttonText:n="Search",labelText:o="Search For Movies",onInput:r,wssResponse:c}=t,{isFocused:a,moveDown:l}=e;const h=["_animate",a?"moveup":"",l?"movedown":""];return Object(i.b)("div",{class:"search-component"},Object(i.b)("form",{action:"javascript:",onSubmit:this.onSubmit},Object(i.b)("label",{class:h,for:s},o),Object(i.b)(u,{onFocus:this.onFocus,onBlur:this.onBlur,id:s,onInput:t=>{this.onInput(t),null!=r&&r(t)}}),c,Object(i.b)("button",{class:"search-button"},n)))}}function u(t){let{onFocus:e,onBlur:s,onInput:n,id:o}=t;return Object(i.b)("input",{onFocus:e,onBlur:s,onInput:n,id:o,class:"paper-input"})}},234:function(t,e,s){"use strict";s.d(e,"a",(function(){return l})),s.d(e,"b",(function(){return b}));var n=s(8),o=s.n(n),r=s(3),i=s(47),c=s(226),u=s(109),a=s(49);function l(){return Object(r.b)(r.a,null,Object(r.b)("div",{style:{display:"block",marginTop:"50px"}},"Check some of these movies out!"),Object(r.b)(h))}class h extends i.a{constructor(){super(...arguments),o()(this,"state",{resp:[]})}componentWillMount(){u.a.get("/i/rec/").then(t=>t.json()).then(t=>{this.setState({resp:t.recommendations})})}render(t,e){let{resp:s=[]}=e;return Object(r.b)("div",{class:"rec-box"},s.map(t=>Object(r.b)(b,{data:t})))}}class b extends i.a{render(t){let{data:e={},customOnClick:s}=t;const n=Object(r.b)(r.a,null,Object(r.b)(p,{thumb:e.thumb?Object(a.f)(e.thumb).then(a.i):null}),Object(r.b)("span",{class:"rec-title"},Object(a.c)(e.movie)));return s?Object(r.b)("div",{class:"rec-wrapper",onClick:()=>s(e.id)},n):function(t,e){return t.id?Object(r.b)(c.a,{class:"rec-wrapper",href:Object(a.e)(t.id,t.movie)},e):Object(r.b)("span",{class:"rec-wrapper"},e)}(e,n)}}class p extends i.a{constructor(){super(...arguments),o()(this,"state",{thumb:""}),o()(this,"componentDidUpdate",this.componentDidMount)}componentDidMount(t){if(null==this.props.thumb)return this.setState(t=>null!=t&&t.thumb?{thumb:""}:null);this.props.thumb&&this.props.thumb.then&&(!this.state.thumb||t&&t.thumb!==this.props.thumb)&&this.props.thumb.then(t=>t&&this.setState({thumb:t}))}render(t,e){let{}=t,{thumb:s=""}=e;return Object(r.b)("div",{style:{backgroundImage:s?"url(".concat(s,")"):"none"},class:"rec-image"})}}},236:function(t,e,s){"use strict";var n=s(10);let o=Object(n.e)();const r=Object(n.b)("Map",o),i=(Object(n.b)("Set",o),Object(n.b)("WeakMap",o)&&Object(n.b)("WeakSet",o),"__@@map"),c=t=>t!=t,u=(t,e)=>t===e||c(t)&&c(e),a=t=>0===t?0:t;let l,h,b;if("undefined"!=typeof Symbol){function p(t,e){const s=t[i];let n=0;const o=s.length,r=e?0:1;return{[Symbol.iterator]:function(){return this},next:function(){return n<o?{value:s[n++][r],done:!1}:{value:void 0,done:!0}}}}l=function(){return this[i][Symbol.iterator]()},h=function(){return p(this,!1)},b=function(){return p(this,!0)}}else l=b=h=function(){console.warn("no symbol support")};var d={keys:b,values:h,entries:l},m=s(113);function S(t,e){const s=t[i],n=s.length;for(let t=0;t<n;t++){const n=s[t];if(u(n[0],e))return n}return null}function j(t,e){if(s=t,!(null!=(n=e)&&"undefined"!=typeof Symbol&&n[Symbol.hasInstance]?n[Symbol.hasInstance](s):s instanceof n))throw new TypeError("Cannot call a class as a function");var s,n}const f=function t(e,s){return j(this,t),!s&&r?new Map(e):(this[i]=[],function(t,e){if(null==e)return;if(!Object(n.d)(e))throw new Error("value:"+String(e)+" is not iterable");const s=e.length;for(let n=0;n<s;n++){const s=e[n];if(!s||2!==s.length)throw new Error("invalid arg");t.set(s[0],s[1])}}(this,e),this)};var M;(M=f).prototype.set=function(t,e){const s=S(this,t);return s?s[1]=e:this[i].push([a(t),e]),this},M.prototype.has=function(t){return!!S(this,t)},M.prototype.delete=function(t){let e=!1;return this[i]=this[i].filter(s=>{const n=!u(s[0],t);return n||(e=!0),n}),e},M.prototype.get=function(t){const e=S(this,t);return e?e[1]:void 0},M.prototype.forEach=function(t,e){const s=this[i],n=s.length;for(let o=0;o<n;o++){const n=s[o],r=n[1],i=n[0],c=this;e?t.call(e,r,i,c):t(r,i,c)}},M.prototype.clear=function(){this[i].length=0},Object.defineProperty(M.prototype,"size",{enumerable:!1,configurable:!0,get:function(){return this[i].length}}),"undefined"!=typeof Symbol&&(M.prototype[Symbol.iterator]=d.entries,M.prototype[Symbol.toStringTag]="Map"),Object(m.a)(M.prototype,d),f[Symbol.species]=f;e.a=f},240:function(t,e,s){"use strict";s.d(e,"b",(function(){return p})),s.d(e,"a",(function(){return d}));var n=s(8),o=s.n(n),r=s(47),i=s(3),c=s(109),u=s(49),a=s(234);const l=new(s(236).a),h=async t=>{const e=await c.a.post("/api/data/search/",!0,Object(u.j)({q:t}));return await e.json()};console.log("Search-results cache:",l);const b=async t=>{t=(t||"").toLowerCase();try{const e=l.get(t);if(e)return console.log("refreshing cache in background"),h(t).then(e=>l.set(t,e)),e;const s=await h(t);return l.set(t,s),s}catch(t){return{hasError:!0}}},p={data:{thumb:""}};class d extends r.a{constructor(){super(...arguments),o()(this,"state",{resp:[],fetchingPromise:null,isFetching:!1,showGhost:!0}),o()(this,"showResults",t=>t.hasError?this.setState({hasError:!0,resp:[],fetchingPromise:null,isFetching:!1,showGhost:!1}):this.setState({resp:{data:t.movies,q:this.props.q},showGhost:!1,isFetching:!1,fetchingPromise:null}))}componentDidMount(){this.setState({didMount:!0,isFetching:!0,fetchingPromise:b(this.props.q).then(this.showResults),showGhost:!0})}componentDidUpdate(t){(!this.state.isFetching&&this.props.q!==this.state.resp.q||(t||{}).q!==this.props.q)&&this.setState({isFetching:!0,hasError:!1,fetchingPromise:b(this.props.q).then(this.showResults),showGhost:!0})}render(t,e){let{q:s,customOnClick:n}=t,{showGhost:o,resp:r,hasError:c}=e;return c?Object(i.b)("div",null,"An Error occured"):o?Object(i.b)("div",{class:"rec-box"},Array.from({length:5},()=>Object(i.b)(a.b,p))):r.data&&r.data.length?Object(i.b)("div",{class:"rec-box"},r.data.map(t=>Object(i.b)(a.b,{data:t,customOnClick:n}))):Object(i.b)("div",null,'No Results found for:"',s,'"')}}},256:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMjAgMTFINi44M2wyLjg4LTIuODhjLjM5LS4zOS4zOS0xLjAyIDAtMS40MS0uMzktLjM5LTEuMDItLjM5LTEuNDEgMEwzLjcxIDExLjNjLS4zOS4zOS0uMzkgMS4wMiAwIDEuNDFMOC4zIDE3LjNjLjM5LjM5IDEuMDIuMzkgMS40MSAwIC4zOS0uMzkuMzktMS4wMiAwLTEuNDFMNi44MyAxM0gyMGMuNTUgMCAxLS40NSAxLTFzLS40NS0xLTEtMXoiLz48L3N2Zz4="},257:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgZmlsbD0iI2ZmZiI+PHBhdGggZD0iTTIwIDExSDYuODNsMi44OC0yLjg4Yy4zOS0uMzkuMzktMS4wMiAwLTEuNDEtLjM5LS4zOS0xLjAyLS4zOS0xLjQxIDBMMy43MSAxMS4zYy0uMzkuMzktLjM5IDEuMDIgMCAxLjQxTDguMyAxNy4zYy4zOS4zOSAxLjAyLjM5IDEuNDEgMCAuMzktLjM5LjM5LTEuMDIgMC0xLjQxTDYuODMgMTNIMjBjLjU1IDAgMS0uNDUgMS0xcy0uNDUtMS0xLTF6Ii8+PC9zdmc+"},270:function(t,e,s){"use strict";s.r(e);var n=s(8),o=s.n(n),r=s(47),i=s(3),c=s(232),u=s(109),a=s(240),l=s(24),h=s(10),b="entries"in h.a?h.a.entries:function(t){const e=Object(l.a)(t);let s=e.length;const n=Array(s);for(;s--;){const o=e[s];n[s]=[o,t[o]]}return n},p=s(256),d=s.n(p),m=s(257),S=s.n(m);s.d(e,"default",(function(){return M}));const j="/api/add-movie/custom/",f=()=>document.body.hasAttribute("dark")?S.a:d.a;class M extends r.a{constructor(){super(...arguments),o()(this,"state",{optionSelected:null}),o()(this,"_force",()=>this.setState({})),o()(this,"_reset",()=>this.setState({showResults:!1,v:null,optionSelected:null})),o()(this,"_setOption",t=>this.setState({optionSelected:t}))}componentWillUnmount(){window.__globalEvt.unsubscribe(this._force)}componentDidMount(){window.__globalEvt.subscribe(this._force)}render(t,e){let{}=t,{optionSelected:s}=e;return s?Object(i.b)(i.a,null,Object(i.b)("div",{onClick:this._reset,class:"back-svg",style:{backgroundImage:"url(".concat(f(),")")}}),"edit"===s?Object(i.b)(v):Object(i.b)(O)):Object(i.b)(g,{data:["add","edit"],updater:this._setOption})}}class O extends r.a{constructor(){super(...arguments),o()(this,"handleSubmit",()=>{const{movie:t,url:e,alt1:s,alt2:n,thumb:o,key:r}=this.state.inputProps;if(!(t&&o&&e&&r))return this.errState("empty");this._post({movie:t,"movie-urls":[e,s,n],type:"add",thumb:o,token:r})}),o()(this,"state",{inputProps:{movie:"",url:"",alt1:"",alt2:"",thumb:"",key:""}}),o()(this,"getHandleInput",t=>e=>this.setState(s=>{const n=s.inputProps;return s.inputProps[t]=e.target.value,{inputProps:n}}))}errState(t){this.setState({error:t})}_post(t){u.a.post(j,!0,t,{"content-type":"application/json"}).then(t=>t.json()).then(t=>t.error?this.setState({error:t.error}):this.setState({success:!0}))}render(t,e){let{}=t;return Object(i.b)("form",{action:"javascript:",onSubmit:this.handleSubmit},b(e.inputProps).map(t=>{let[e,s]=t;return Object(i.b)("input",{placeholder:e,value:s,class:"data-inp-admin paper-input",onInput:this.getHandleInput(e)})}),Object(i.b)("button",{class:"search-button"},"Add Movie"),e.error?Object(i.b)("div",{style:"color:red"},e.error):null)}}function g(t){let{data:e,updater:s}=t;return Object(i.b)("div",null,Object(i.b)("div",null,"Select Option"),Object(i.b)("div",{class:"option-contain"},e.map(t=>Object(i.b)("button",{class:"search-button admin-button",onClick:()=>s(t)},t))))}class v extends O{constructor(){super(...arguments),o()(this,"state",{inputProps:{url:"",alt1:"",alt2:"",key:""}}),o()(this,"handleSubmit",()=>{const{url:t,alt1:e,alt2:s,key:n}=this.state.inputProps;if(!t||!n)return this.errState("empty");this._post({"movie-urls":[t,e||null,s||null],type:"edit",token:n,mid:this.state.mid})}),o()(this,"_searchBoxOnSubmit",t=>this.setState({showResults:!0,v:t})),o()(this,"handleClick",t=>this.setState({showEditor:!0,mid:t}))}render(t,e){let{showEditor:s,v:n,showResults:o}=e;return this.state.success?"Success":s?super.render(t,this.state):Object(i.b)("div",null,Object(i.b)(c.a,{id:"add-subtitles",onSubmit:this._searchBoxOnSubmit}),o?Object(i.b)(a.a,{q:n,customOnClick:this.handleClick}):null)}}}}]);